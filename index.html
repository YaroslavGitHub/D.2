<html>
    <head>
        <meta charset="UTF-8">
        <title>INN</title>
    </head>
    <body>

            
            <p id="demo3"></p>

        <script>

            var card = ""
            card = prompt("Enter your card number")
           
            card = card.replace(/ |-/g, "");
            var y = card;
            
            card = card.split("", 16);
            var x = card
            console.log(card)

            function PersonCard( one, two, three, four, start, clean ) {

                this.dg1 = one;
                this.dg2 = two;
                this.dg3 = three;
                this.dg4 = four;
                this.CardStart = start;
                this.CardClean = clean;
                this.totalInfoTrue = function() {
                    return "card: " + this.CardStart + ", is Correct: " + this.isCorrect()  + " , paymentSystem: " + this.paymentSystem() + ", accepted: true";
                    };
                this.totalInfoFalse = function() {
                    return "card: " + this.CardStart + ", accepted: false";
                    };
            }
           
            
            var myCard = new PersonCard([x[0]],[x[1]],[x[2]],[x[3]], y, x)   
            console.log(myCard)
            var isCorrect
            console.log(PersonCard)

            PersonCard.prototype.isCorrect = function() {

                var sum = 0;

                for(var i = this.CardClean.length - 1; i >= 0; i--) {

                var dg = +this.CardClean[i];

                if(i % 2 == 0) {
                    dg *= 2;
                    dg = dg > 9 ? dg - 9 : dg
                    }
                    sum += dg;
                    }
                return (sum % 10 == 0) ? "true" : "false";
            }
            
            PersonCard.prototype.paymentSystem = function() {

                if(+this.dg1 == 4) {
                    return "VISA"
                }
                else if ( 2220 < +("this.dg1" + "this.dg2" + "this.dg3" + "this.dg4") <2721) {
                    return "MasterCard"
                }
                else if (+(this.dg1 + this.dg2) == 50) {
                    return "Maestro"
                }
                else if ( 50 < +(this.dg1 + this.dg2) && +(this.dg1 + this.dg2)< 56) {
                    return "MasterCard"
                }
                else if ( 55 < +(this.dg1 + this.dg2) && +(this.dg1 + this.dg2)<70)  {
                    return "Maestro"
                }
                else {
                    return ""
                }
            }  

            PersonCard.prototype.accepted = function() {
                
                if ((this.isCorrect() == "true") && (this.paymentSystem() == "Maestro" || "VISA" || "MasterCard")) {
                    console.log(this.totalInfoTrue());
                return document.getElementById("demo3").innerHTML = this.totalInfoTrue();
                
                }   
                else if (this.isCorrect() == "false") {
                    console.log(this.totalInfoFalse());
                return document.getElementById("demo3").innerHTML = this.totalInfoFalse();
                
                }
                
                }
                
                console.log(myCard.accepted());
                
              
                

        </script>
    </body>
</html>
